<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.85.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Client Option | CloudWeGo</title><meta name=description content="A leading practice for building enterprise cloud native middleware!"><meta property="og:title" content="Client Option"><meta property="og:description" content="Usage Add some options when creating a client：
client, err := echo.NewClient(&#34;targetService&#34;, client.WithXXXX...) Basic Options WithClientBasicInfo func WithClientBasicInfo(ebi *rpcinfo.EndpointBasicInfo) Option Set the basic infos for client, such as ServiceName, Method and Tags.
WithHostPorts func WithHostPorts(hostports ...string) Option Manually specifie one or more targets overrides the results discovered by the service and directly connects to the access.
WithTransportProtocol func WithTransportProtocol(tp transport.Protocol) Option Set the transport protocol, configure the transport protocol on the message protocol."><meta property="og:type" content="article"><meta property="og:url" content="/docs/kitex/tutorials/options/client_options/"><meta property="article:section" content="docs"><meta property="article:published_time" content="2022-06-20T00:00:00+00:00"><meta property="article:modified_time" content="2022-11-02T19:56:36+08:00"><meta property="og:site_name" content="CloudWeGo"><meta itemprop=name content="Client Option"><meta itemprop=description content="Usage Add some options when creating a client：
client, err := echo.NewClient(&#34;targetService&#34;, client.WithXXXX...) Basic Options WithClientBasicInfo func WithClientBasicInfo(ebi *rpcinfo.EndpointBasicInfo) Option Set the basic infos for client, such as ServiceName, Method and Tags.
WithHostPorts func WithHostPorts(hostports ...string) Option Manually specifie one or more targets overrides the results discovered by the service and directly connects to the access.
WithTransportProtocol func WithTransportProtocol(tp transport.Protocol) Option Set the transport protocol, configure the transport protocol on the message protocol."><meta itemprop=datePublished content="2022-06-20T00:00:00+00:00"><meta itemprop=dateModified content="2022-11-02T19:56:36+08:00"><meta itemprop=wordCount content="1436"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Client Option"><meta name=twitter:description content="Usage Add some options when creating a client：
client, err := echo.NewClient(&#34;targetService&#34;, client.WithXXXX...) Basic Options WithClientBasicInfo func WithClientBasicInfo(ebi *rpcinfo.EndpointBasicInfo) Option Set the basic infos for client, such as ServiceName, Method and Tags.
WithHostPorts func WithHostPorts(hostports ...string) Option Manually specifie one or more targets overrides the results discovered by the service and directly connects to the access.
WithTransportProtocol func WithTransportProtocol(tp transport.Protocol) Option Set the transport protocol, configure the transport protocol on the message protocol."><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYWRQRLPRM"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-QYWRQRLPRM')</script><script>var _hmt=_hmt||[];(function(){var a=document.createElement("script"),b;a.src="https://hm.baidu.com/hm.js?f1808c42af827f368aa7eca3baae6d55",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script><link rel=preload href=/scss/main.min.d201674178e955a8bd21626117358837295708ba1a2b6c81323efdc76010c4b9.css as=style><link href=/scss/main.min.d201674178e955a8bd21626117358837295708ba1a2b6c81323efdc76010c4b9.css rel=stylesheet integrity><script src=https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-QYWRQRLPRM','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand-xl navbar-dark td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><img src=/img/logo.png></span></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0 ml-auto"><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Documentation</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/kitex/>Kitex</a>
<a class=dropdown-item href=/docs/hertz/>Hertz</a>
<a class=dropdown-item href=/docs/volo/>Volo</a>
<a class=dropdown-item href=/docs/netpoll/>Netpoll</a>
<a class=dropdown-item href=/docs/motore/>Motore</a>
<a class=dropdown-item href=/docs/pilota/>Pilota</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cooperation/><span>Cooperation</span></a></li><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Security</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/security/safety-bulletin/>safety-bulletin</a>
<a class=dropdown-item href=/security/vulnerability-reporting/>vulnerability-reporting</a></div></li><li class="nav-item dropdown mr-4"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/kitex/tutorials/options/client_options/>中文</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.aa7d9058d53457c209a4ae32beec4da3.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.aa7d9058d53457c209a4ae32beec4da3.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/kitex/tutorials/options/client_options/>中文</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docskitex-li><a href=/docs/kitex/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitex><span>Kitex</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexoverview-li><a href=/docs/kitex/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexoverview><span>Overview</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexgetting-started-li><a href=/docs/kitex/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexgetting-started><span>Getting Started</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docskitextutorials-li><a href=/docs/kitex/tutorials/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorials><span>Tutorials</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsbasic-feature-li><a href=/docs/kitex/tutorials/basic-feature/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsbasic-feature><span>Basic Feature</span></a><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featuremessage_type-li><a href=/docs/kitex/tutorials/basic-feature/message_type/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featuremessage_type><span>Message Types</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureserialization_protocol-li><a href=/docs/kitex/tutorials/basic-feature/serialization_protocol/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureserialization_protocol><span>Serialization Protocol</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featuretransport_protocol-li><a href=/docs/kitex/tutorials/basic-feature/transport_protocol/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featuretransport_protocol><span>Transport Protocol</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurevisit_directly-li><a href=/docs/kitex/tutorials/basic-feature/visit_directly/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurevisit_directly><span>Visit Directly</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureconnection_type-li><a href=/docs/kitex/tutorials/basic-feature/connection_type/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureconnection_type><span>Connection Type</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featuretimeout-li><a href=/docs/kitex/tutorials/basic-feature/timeout/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featuretimeout><span>Timeouts</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureretry-li><a href=/docs/kitex/tutorials/basic-feature/retry/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureretry><span>Retry</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureloadbalance-li><a href=/docs/kitex/tutorials/basic-feature/loadbalance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureloadbalance><span>LoadBalancer</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurecircuitbreaker-li><a href=/docs/kitex/tutorials/basic-feature/circuitbreaker/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurecircuitbreaker><span>Circuit Breaker</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurelimiting-li><a href=/docs/kitex/tutorials/basic-feature/limiting/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurelimiting><span>Rate Limiting</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featuretracing-li><a href=/docs/kitex/tutorials/basic-feature/tracing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featuretracing><span>Instrumentation Control</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurelogging-li><a href=/docs/kitex/tutorials/basic-feature/logging/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurelogging><span>Logging</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsservice-governance-li><a href=/docs/kitex/tutorials/service-governance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsservice-governance><span>Service Governance</span></a><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governancediscovery-li><a href=/docs/kitex/tutorials/service-governance/discovery/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governancediscovery><span>Service Discovery</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governancemonitoring-li><a href=/docs/kitex/tutorials/service-governance/monitoring/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governancemonitoring><span>Monitoring</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governancetracing-li><a href=/docs/kitex/tutorials/service-governance/tracing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governancetracing><span>Tracing</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governanceaccess_control-li><a href=/docs/kitex/tutorials/service-governance/access_control/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governanceaccess_control><span>Customized Access Control</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsadvanced-feature-li><a href=/docs/kitex/tutorials/advanced-feature/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsadvanced-feature><span>Advanced Feature</span></a><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featurexds-li><a href=/docs/kitex/tutorials/advanced-feature/xds/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featurexds><span>xDS Support</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsadvanced-featuregeneric-call-li><a href=/docs/kitex/tutorials/advanced-feature/generic-call/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsadvanced-featuregeneric-call><span>Generic Call</span></a><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuregeneric-callthrift_idl_annotation_standards-li><a href=/docs/kitex/tutorials/advanced-feature/generic-call/thrift_idl_annotation_standards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuregeneric-callthrift_idl_annotation_standards><span>IDL Definition Specification for Mapping between Thrift and HTTP</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuremetainfo-li><a href=/docs/kitex/tutorials/advanced-feature/metainfo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuremetainfo><span>Metainfo</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featureinvoker-li><a href=/docs/kitex/tutorials/advanced-feature/invoker/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featureinvoker><span>Server SDK Mode</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featurecodec_frugal-li><a href=/docs/kitex/tutorials/advanced-feature/codec_frugal/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featurecodec_frugal><span>Frugal</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featureerror_handler-li><a href=/docs/kitex/tutorials/advanced-feature/error_handler/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featureerror_handler><span>Customize Error Handler</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuregrpcproxy-li><a href=/docs/kitex/tutorials/advanced-feature/grpcproxy/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuregrpcproxy><span>gRPC Proxy</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featurestart_shutdown_hook-li><a href=/docs/kitex/tutorials/advanced-feature/start_shutdown_hook/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featurestart_shutdown_hook><span>Customize Hook for Start/Shutdown of Server-side</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialscode-gen-li><a href=/docs/kitex/tutorials/code-gen/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialscode-gen><span>Code Generation</span></a><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-gencode_generation-li><a href=/docs/kitex/tutorials/code-gen/code_generation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gencode_generation><span>Code Generation Tool</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-gencombine_service-li><a href=/docs/kitex/tutorials/code-gen/combine_service/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gencombine_service><span>Combine Service</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genvalidator-li><a href=/docs/kitex/tutorials/code-gen/validator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genvalidator><span>Thrift Validator</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genfastpb-li><a href=/docs/kitex/tutorials/code-gen/fastpb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genfastpb><span>Fastpb</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsframework-exten-li><a href=/docs/kitex/tutorials/framework-exten/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsframework-exten><span>Framework Extension</span></a><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenmiddleware-li><a href=/docs/kitex/tutorials/framework-exten/middleware/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenmiddleware><span>Middleware Extensions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extensuite-li><a href=/docs/kitex/tutorials/framework-exten/suite/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extensuite><span>Suite Extensions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenregistry-li><a href=/docs/kitex/tutorials/framework-exten/registry/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenregistry><span>Extension of Service Registry</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenservice_discovery-li><a href=/docs/kitex/tutorials/framework-exten/service_discovery/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenservice_discovery><span>Service Discovery Extension</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenloadbalance-li><a href=/docs/kitex/tutorials/framework-exten/loadbalance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenloadbalance><span>Customize LoadBalancer</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenmonitoring-li><a href=/docs/kitex/tutorials/framework-exten/monitoring/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenmonitoring><span>Monitoring Extension</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extencodec-li><a href=/docs/kitex/tutorials/framework-exten/codec/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extencodec><span>Extension of Codec</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extentransport-li><a href=/docs/kitex/tutorials/framework-exten/transport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extentransport><span>Extension of Transport Module</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extentransmeta-li><a href=/docs/kitex/tutorials/framework-exten/transmeta/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extentransmeta><span>Extension of Metadata Transparent Transmission</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extentrans_pipeline-li><a href=/docs/kitex/tutorials/framework-exten/trans_pipeline/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extentrans_pipeline><span>Extension of Transport Pipeline-Bound</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extendiagnosis-li><a href=/docs/kitex/tutorials/framework-exten/diagnosis/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extendiagnosis><span>Extension of Diagnosis</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docskitextutorialsoptions-li><a href=/docs/kitex/tutorials/options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsoptions><span>Option</span></a><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docskitextutorialsoptionsclient_options-li><a href=/docs/kitex/tutorials/options/client_options/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsoptionsclient_options><span class=td-sidebar-nav-active-item>Client Option</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsoptionsserver_options-li><a href=/docs/kitex/tutorials/options/server_options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsoptionsserver_options><span>Server Option</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsoptionscall_options-li><a href=/docs/kitex/tutorials/options/call_options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsoptionscall_options><span>Call Option</span></a></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitexreference-li><a href=/docs/kitex/reference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexreference><span>Reference</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexreferencetransport_protocol_ttheader-li><a href=/docs/kitex/reference/transport_protocol_ttheader/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexreferencetransport_protocol_ttheader><span>TTHeader</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexreferenceexception-li><a href=/docs/kitex/reference/exception/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexreferenceexception><span>Exception Instruction</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexreferenceversion-li><a href=/docs/kitex/reference/version/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexreferenceversion><span>Version Specification</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexfaq-li><a href=/docs/kitex/faq/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexfaq><span>FAQ</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/cloudwego/cloudwego.github.io/edit/main/content/en/docs/kitex/Tutorials/options/client_options.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/new/main/content/en/docs/kitex/Tutorials/options/client_options.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/issues/new?title=Client%20Option" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/cloudwego/kitex/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><ul><li></li><li><a href=#grpc-options>gRPC Options</a></li></ul></li></ul><ul><li><ul><li></li></ul></li></ul><ul><li><ul><li></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=/docs/>Documentation</a></li><li class=breadcrumb-item><a href=/docs/kitex/>Kitex</a></li><li class=breadcrumb-item><a href=/docs/kitex/tutorials/>Tutorials</a></li><li class=breadcrumb-item><a href=/docs/kitex/tutorials/options/>Option</a></li><li class="breadcrumb-item active" aria-current=page><a href=/docs/kitex/tutorials/options/client_options/>Client Option</a></li></ol></nav><div class=td-content><h1>Client Option</h1><header class=article-meta></header><h1 id=usage>Usage</h1><p>Add some options when creating a client：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#000>client</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>echo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;targetService&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithXXXX</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><h1 id=basic-options>Basic Options</h1><h4 id=withclientbasicinfo>WithClientBasicInfo</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithClientBasicInfo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ebi</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>rpcinfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>EndpointBasicInfo</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set the basic infos for client, such as ServiceName, Method and Tags.</p><h4 id=withhostports>WithHostPorts</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithHostPorts</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hostports</span> <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Manually specifie one or more targets overrides the results discovered by the service and directly connects to the access.</p><h4 id=withtransportprotocol>WithTransportProtocol</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithTransportProtocol</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tp</span> <span style=color:#000>transport</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Protocol</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set the transport protocol, configure the transport protocol on the message protocol. Thrift/KitexProtobuf can configure TTHeader, TTHeaderFramed, and Framed. In addition, Framed is not strictly a transmission protocol. In order to distinguish it for PurePayload, it is also configured as a transmission protocol. PurePayload means that there is no transmission protocol; if it is configured as GRPC, it means that the GRPC protocol is used. , the transmission protocol of GRPC is HTTP2, but for the convenience of users' understanding, it is directly used as the configuration of the transmission protocol. Note that configuring GRPC needs to use Protobuf to define Service. If GRPC is not configured, KitexProtobuf protocol is used by default.</p><h4 id=withshortconnection>WithShortConnection</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithShortConnection</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000>Option</span>
</code></pre></div><p>Enable short connections. <a href=https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/connection_type/>More</a></p><h4 id=withlongconnection>WithLongConnection</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithLongConnection</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cfg</span> <span style=color:#000>connpool</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IdleConfig</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Enable long connections. <a href=https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/connection_type/>More</a></p><h4 id=withmuxconnection>WithMuxConnection</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithMuxConnection</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>connNum</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Enable mux connections. Server side also need to turn on this option, or it won&rsquo;t work. <a href=https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/connection_type/>More</a></p><h4 id=withmiddleware>WithMiddleware</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithMiddleware</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mw</span> <span style=color:#000>endpoint</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Middleware</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Add a middleware that executes after service level circuit breaker and timeout middleware. <a href=https://www.cloudwego.io/docs/kitex/tutorials/framework-exten/middleware/>More</a></p><h4 id=withinstancemw>WithInstanceMW</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithInstanceMW</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mw</span> <span style=color:#000>endpoint</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Middleware</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Add a middleware that executes after service discovery and load balance. If instance level circuit breaker exists, then it will execute after that. (If proxy is used, it will not be called, such as mesh mode). <a href=https://www.cloudwego.io/docs/kitex/tutorials/framework-exten/middleware/>More</a></p><h4 id=withmiddlewarebuilder>WithMiddlewareBuilder</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithMiddlewareBuilder</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mwb</span> <span style=color:#000>endpoint</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MiddlewareBuilder</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Add middleware depends on the context passed in by the framework that contains runtime configuration information (the context of non-RPC calls), so that the middleware can take advantage of the framework&rsquo;s information when initializing.</p><h4 id=withcircuitbreaker>WithCircuitBreaker</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithCircuitBreaker</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>s</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>circuitbreak</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>CBSuite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set the circuit breaker, which includes service circuit break and instance circuit break by default, using the example:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Go data-lang=Go><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>opts</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Option</span>

<span style=color:#000>cbs</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>circuitbreak</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewCBSuite</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>circuitbreak</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RPCInfo2Key</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>opts</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithCloseCallbacks</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>error</span> <span style=color:#000;font-weight:700>{</span>
   <span style=color:#8f5902;font-style:italic>// Circuit Breaker Close method is injected into CloseCallbacks to release circuit breaker related resources when the client is destroyed
</span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>cs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>cbs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Close</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#000;font-weight:700>}))</span>
<span style=color:#000>opts</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithCircuitBreaker</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cbs</span><span style=color:#000;font-weight:700>))</span>


<span style=color:#8f5902;font-style:italic>// Dynamically updates the circuit breaker configuration
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>cbs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>UpdateServiceCBConfig</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>config</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>cbs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>UpdateInstanceCBConfig</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>config</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>For more details, please visit <a href=https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/circuitbreaker/>Circuit Breaker</a>.</p><h4 id=withfailureretry>WithFailureRetry</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithFailureRetry</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FailurePolicy</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set timeout retry rules, you can configure the maximum number of retries, the maximum time spent accumulated, the threshold of the retry circuit fault rate, the DDL abort and backoff policy. <a href=https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/retry/>More</a></p><h4 id=withbackuprequest>WithBackupRequest</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithBackupRequest</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BackupPolicy</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set the policy for Backup Request, which can configure the number of requests, circuit breaker abort, and link abort. <a href=https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/retry/>More</a></p><h4 id=withrpctimeout>WithRPCTimeout</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithRPCTimeout</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>d</span> <span style=color:#000>time</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Duration</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set RPC timeout. <a href=https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/timeout/>More</a></p><h4 id=withconnecttimeout>WithConnectTimeout</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithConnectTimeout</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>d</span> <span style=color:#000>time</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Duration</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set connect timeout. <a href=https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/timeout/>More</a></p><h4 id=withtimeoutprovider>WithTimeoutProvider</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithTimeoutProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span> <span style=color:#000>rpcinfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>TimeoutProvider</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Add a TimeoutProvider to set the RPC timeout, connection timeout, etc. policies as a whole. If You use Both <code>WithRPCTimeout</code> or <code>WithConnectTimeout</code>, the settings here will be overridden.</p><h4 id=withdestservice>WithDestService</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithDestService</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>svr</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Specify the service name of the target side of the call.</p><h4 id=withtag>WithTag</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithTag</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>val</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span> 
</code></pre></div><p>Add some meta information to the client, such as idc, cluster, etc., for scenarios such as auxiliary service discovery.</p><h4 id=withstatslevel>WithStatsLevel</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithStatsLevel</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>level</span> <span style=color:#000>stats</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Level</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Optiong</span>
</code></pre></div><p>Set the stats level for client. <a href=https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/tracing/>More</a></p><h3 id=grpc-options>gRPC Options</h3><blockquote><p>These options only works for scenarios where the transport protocol uses gRPC, with some parameter adjustments to gRPC transfers.</p></blockquote><h4 id=withgrpcconnpoolsize>WithGRPCConnPoolSize</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithGRPCConnPoolSize</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>s</span> <span style=color:#204a87;font-weight:700>uint32</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>WithGRPCConnPoolSize sets the value for the client connection pool size. In general, you should not adjust the size of the connection pool, otherwise it may cause performance degradation. You should adjust the size according to the actual situation.</p><h4 id=withgrpcwritebuffersize>WithGRPCWriteBufferSize</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithGRPCWriteBufferSize</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>s</span> <span style=color:#204a87;font-weight:700>uint32</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>WithGRPCWriteBufferSize determines how much data can be batched before doing a write on the wire. The corresponding memory allocation for this buffer will be twice the size to keep syscalls low. The default value for this buffer is 32KB. Zero will disable the write buffer such that each write will be on underlying connection.
Note: A Send call may not directly translate to a write. It corresponds to the WriteBufferSize ServerOption of gRPC.</p><h4 id=withgrpcreadbuffersize>WithGRPCReadBufferSize</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithGRPCReadBufferSize</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>s</span> <span style=color:#204a87;font-weight:700>uint32</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>WithGRPCReadBufferSize lets you set the size of read buffer, this determines how much data can be read at most for one read syscall. The default value for this buffer is 32KB. Zero will disable read buffer for a connection so data framer can access the underlying conn directly. It corresponds to the ReadBufferSize ServerOption of gRPC.</p><h4 id=withgrpcinitialwindowsize>WithGRPCInitialWindowSize</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithGRPCInitialWindowSize</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>s</span> <span style=color:#204a87;font-weight:700>uint32</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>WithGRPCInitialWindowSize returns a Option that sets window size for stream. The lower bound for window size is 64K and any value smaller than that will be ignored. It corresponds to the InitialWindowSize ServerOption of gRPC.</p><h4 id=withgrpcinitialconnwindowsize>WithGRPCInitialConnWindowSize</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithGRPCInitialConnWindowSize</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>s</span> <span style=color:#204a87;font-weight:700>uint32</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>WithGRPCInitialConnWindowSize returns an Option that sets window size for a connection. The lower bound for window size is 64K and any value smaller than that will be ignored. It corresponds to the InitialConnWindowSize ServerOption of gRPC.</p><h4 id=withgrpcmaxheaderlistsize>WithGRPCMaxHeaderListSize</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithGRPCMaxHeaderListSize</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>s</span> <span style=color:#204a87;font-weight:700>uint32</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>WithGRPCMaxHeaderListSize returns a ServerOption that sets the max (uncompressed) size of header list that the server is prepared to accept. It corresponds to the MaxHeaderListSize ServerOption of gRPC.</p><h4 id=withgrpckeepaliveparams>WithGRPCKeepaliveParams</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithGRPCKeepaliveParams</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>kp</span> <span style=color:#000>grpc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ClientKeepalive</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>WithGRPCKeepaliveParams returns a DialOption that specifies keepalive parameters for the client transport. It corresponds to the WithKeepaliveParams DialOption of gRPC.</p><h1 id=advanced-options>Advanced Options</h1><h4 id=withsuite>WithSuite</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithSuite</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>suite</span> <span style=color:#000>Suite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set up a specific configuration, customize according to the scene, configure multiple options and middlewares combinations and encapsulations in the Suite. <a href=https://www.cloudwego.io/docs/kitex/tutorials/framework-exten/suite/>More</a></p><h4 id=withproxy>WithProxy</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithProxy</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span> <span style=color:#000>proxy</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ForwardProxy</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>For proxy scenarios (such as Mesh Egress), do some configuration processing, return proxy address, configure proxy. After ForwardProxy, the framework does not perform service discovery, circuit breakers, and InstanceMWs.</p><h4 id=withretrycontainer>WithRetryContainer</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithRetryContainer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>rc</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Container</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Manually set up RetryContainer. Used to retry the strategy in combination with circuit breakers. At present, three rapid implementation schemes are available: NewRetryContainer, NewRetryContainerWithCB and NewRetryContainerWithCBStat.</p><ul><li>NewRetryContainerWithCB (recommended)</li></ul><p>If you have already configured the circuit breaker, it is recommended to reuse the circuit breaker with RetryContainer to avoid additional statistics, you can use the NewRetryContainerWithCB, such as the example in the example below, enable the circuit breaker scenario, and at the same time pass the circuit breaker to RetryContainer:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>   <span style=color:#000>cbs</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>circuitbreak</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewCBSuite</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>circuitbreak</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RPCInfo2Key</span><span style=color:#000;font-weight:700>)</span>
   <span style=color:#000>retryC</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewRetryContainerWithCB</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cbs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ServiceControl</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>cbs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ServicePanel</span><span style=color:#000;font-weight:700>())</span>
       <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>opts</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Option</span>
   <span style=color:#000>opts</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithRetryContainer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>retryC</span><span style=color:#000;font-weight:700>))</span>
    <span style=color:#8f5902;font-style:italic>// enable service circuit breaker
</span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#000>opts</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithMiddleware</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cbs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ServiceCBMW</span><span style=color:#000;font-weight:700>()))</span>
</code></pre></div><ul><li>NewRetryContainer<ul><li>Specifies the default RetryContainer for the retry policy, which has a built-in circuit breaker.</li></ul></li><li>NewRetryContainerWithCBStat</li></ul><p>To customize the built-in circuit breaker ServiceCBKeyFunc settings, you can use the NewRetryContainerWithCBStat method:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>   <span style=color:#000>cbs</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>circuitbreak</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewCBSuite</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>YourGenServiceCBKeyFunc</span><span style=color:#000;font-weight:700>)</span>
   <span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewRetryContainerWithCBStat</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cbs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ServiceControl</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>cbs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ServicePanel</span><span style=color:#000;font-weight:700>())</span>
</code></pre></div><h4 id=withwarmingup>WithWarmingUp</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithWarmingUp</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>wuo</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>warmup</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ClientOption</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span> 
</code></pre></div><p>Set warming up option. Kitex supports client warm-up, which allows you to pre-initialize the relevant components of service discovery and connection pooling when creating the client, avoiding large delays on the first request.</p><p>Warm up service discovery:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#000>cli</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>myservice</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>psm</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithWarmingUp</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>warmup</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ClientOption</span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>ResolverOption</span><span style=color:#000;font-weight:700>:</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>warmup</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ResolverOption</span><span style=color:#000;font-weight:700>{</span>
        <span style=color:#000>Dests</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>rpcinfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>EndpointBasicInfo</span><span style=color:#000;font-weight:700>{</span>
            <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>rpcinfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>EndpointBasicInfo</span><span style=color:#000;font-weight:700>{</span>
                <span style=color:#000>ServiceName</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>psm</span><span style=color:#000;font-weight:700>,</span>
                <span style=color:#000>Method</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>method</span><span style=color:#000;font-weight:700>,</span>
                <span style=color:#000>Tags</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span>
                    <span style=color:#4e9a06>&#34;cluster&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;default&#34;</span><span style=color:#000;font-weight:700>,</span>
                <span style=color:#000;font-weight:700>},</span>
            <span style=color:#000;font-weight:700>},</span>
        <span style=color:#000;font-weight:700>},</span>
    <span style=color:#000;font-weight:700>},</span>
<span style=color:#000;font-weight:700>}))</span>
</code></pre></div><p>Warm up connection pool:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#000>cli</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>myservice</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>psm</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithWarmingUp</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>warmup</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ClientOption</span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>PoolOption</span><span style=color:#000;font-weight:700>:</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>warmup</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>PoolOption</span><span style=color:#000;font-weight:700>{</span>
        <span style=color:#000>ConnNum</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000;font-weight:700>},</span>
<span style=color:#000;font-weight:700>}))</span>
</code></pre></div><h4 id=withclosecallbacks>WithCloseCallbacks</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithCloseCallbacks</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>callback</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set close callback function.</p><h4 id=witherrorhandler>WithErrorHandler</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithErrorHandler</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>f</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set the error handler function, which is executed after the server handler is executed and before the middleware executes.</p><h4 id=withgeneric>WithGeneric</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithGeneric</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>g</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Generic</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Specifie the generalization call type, which needs to be used in conjunction with the generalization Client/Server. <a href=https://www.cloudwego.io/docs/kitex/tutorials/advanced-feature/generic-call/>More</a></p><h4 id=withaclrules>WithACLRules</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithACLRules</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>rules</span> <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000>acl</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RejectFunc</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set ACL permission access control, which is executed before service discovery. <a href=https://www.cloudwego.io/docs/kitex/tutorials/service-governance/access_control/>More</a></p><h4 id=withconnreporterenabled>WithConnReporterEnabled</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithConnReporterEnabled</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000>Option</span>
</code></pre></div><p>Enable connection pool reporter. <a href=https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/connection_type/>More</a></p><h4 id=withhttpconnection>WithHTTPConnection</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithHTTPConnection</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000>Option</span> 
</code></pre></div><p>Specifie client use RPC over http.</p><h1 id=extended-options>Extended Options</h1><h4 id=withtracer>WithTracer</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithTracer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>c</span> <span style=color:#000>stats</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Tracer</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Add an additional Tracer. <a href=https://www.cloudwego.io/docs/kitex/tutorials/service-governance/tracing/>More</a></p><h4 id=withresolver>WithResolver</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithResolver</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>r</span> <span style=color:#000>discovery</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Resolver</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Specifie a resolver to do service discovery. <a href=https://www.cloudwego.io/docs/kitex/tutorials/service-governance/discovery/>More</a></p><h4 id=withhttpresolver>WithHTTPResolver</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithHTTPResolver</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>r</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Resolver</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set HTTP resolver. <a href=https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/visit_directly/>More</a></p><h4 id=withloadbalancer>WithLoadBalancer</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithLoadBalancer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>lb</span> <span style=color:#000>loadbalance</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Loadbalancer</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>opts</span> <span style=color:#ce5c00;font-weight:700>...*</span><span style=color:#000>lbcache</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Options</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span> 
</code></pre></div><p>Set load balancer. <a href=https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/loadbalance/>More</a></p><h4 id=withboundhandler>WithBoundHandler</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithBoundHandler</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>h</span> <span style=color:#000>remote</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BoundHandler</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Add a new IO Bound handler. <a href=https://www.cloudwego.io/docs/kitex/tutorials/framework-exten/trans_pipeline/>More</a></p><h4 id=withcodec>WithCodec</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithCodec</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>c</span> <span style=color:#000>remote</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Codec</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Specifie a Codec for scenarios that require custom protocol. <a href=https://www.cloudwego.io/docs/kitex/tutorials/framework-exten/codec/>More</a></p><h4 id=withpayloadcodec>WithPayloadCodec</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithPayloadCodec</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>c</span> <span style=color:#000>remote</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>PayloadCodec</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Specifie a PayloadCodec. <a href=https://www.cloudwego.io/docs/kitex/tutorials/framework-exten/codec/>More</a></p><h4 id=withmetahandler>WithMetaHandler</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithMetaHandler</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>h</span> <span style=color:#000>remote</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MetaHandler</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Add a meta handler for customizing transparent information in conjunction with the transport protocol, such as service name, invocation method, machine room, cluster, env, tracerInfo. <a href=https://www.cloudwego.io/docs/kitex/tutorials/framework-exten/transmeta/>More</a></p><h4 id=withfirstmetahandler>WithFirstMetaHandler</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithFirstMetaHandler</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>h</span> <span style=color:#000>remote</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MetaHandler</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Add a meta handler at the first position.</p><h4 id=withtranshandlerfactory>WithTransHandlerFactory</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithTransHandlerFactory</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>f</span> <span style=color:#000>remote</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ClientTransHandlerFactory</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span> 
</code></pre></div><p>Set transHandlerFactory. <a href=https://www.cloudwego.io/docs/kitex/tutorials/framework-exten/transport/>More</a></p><h4 id=withdiagnosisservice>WithDiagnosisService</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithDiagnosisService</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ds</span> <span style=color:#000>diagnosis</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Service</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set diagnosis service. <a href=https://www.cloudwego.io/docs/kitex/tutorials/framework-exten/diagnosis/>More</a></p><h4 id=withdialer>WithDialer</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithDialer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>d</span> <span style=color:#000>remote</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Dialer</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set dialer.</p><h4 id=withconnpool>WithConnPool</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithConnPool</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>pool</span> <span style=color:#000>remote</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ConnPool</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Option</span>
</code></pre></div><p>Set connection pool.</p><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector('.feedback--answer-yes'),noButton=document.querySelector('.feedback--answer-no'),yesResponse=document.querySelector('.feedback--response-yes'),noResponse=document.querySelector('.feedback--response-no'),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=b=>{if(typeof ga!='function')return;const a={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:b};ga(a.command,a.hitType,a.category,a.action,a.label,a.value)};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(1)}),noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(0)})</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified
November 2, 2022
: <a href=https://github.com/cloudwego/cloudwego.github.io/commit/9d56df40eaf1798f07a6441f3be1882f658f7033>doc: update sonic faq (#412) (9d56df4)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 The CloudWeGo Authors</small><p class="mt-2 text-white"><a class=cloudwego-link href=/about/ target=_blank rel=noopener>About</a>
|
<a class=cloudwego-link href=https://github.com/cloudwego/cloudwego.github.io/blob/main/LICENSE target=_blank rel=noopener>License</a></p></div></div></div></footer></div><script src=https://cdn.staticfile.org/popper.js/1.16.1/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.staticfile.org/bootstrap/4.6.0/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=/js/main.min.cc7c4d018c27afc5b5c4e9ddd9f5b1fca60e2005312b12b5bec0518202c51314.js integrity="sha256-zHxNAYwnr8W1xOnd2fWx/KYOIAUxKxK1vsBRggLFExQ=" crossorigin=anonymous></script></body></html>